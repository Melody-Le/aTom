<html>
  <head>
    <%- include('../partials/generic_head') %>
    <title>aTom | Jobs</title>
    <link rel="stylesheet" type="text/css" href="/styles/freelancer_community_page.css">
    <style>
      .carousel-item{
        height: 20rem;
      }
    </style>
  </head>
  <body>
    <%- include('../partials/navbar') %>
    <div class="container mt-5 ">
      <div class="row row-cols-1 row-cols-md-3 g-3">
        <% jobs.forEach((job) => { %>
          <div class="col">
            <div class="card freelancer-card px-3">
              <a href="/profiles/<%= job?.author_id?._id %> " class="profile-head">
                <img src="<%= job?.author_id?.profile_photos_url %>" class="profile-image" alt="<%= job?.author_id?.user_name %>">
                <h5 class="mx-auto text-capitalize py-3"><%= job?.author_id?.user_name %></h5>
              </a>
              <div class="card-body contact-box-job mx-auto">
                <a href="#!" class="card-link">Message me</a>
                <a href="mailto:<%= job?.author_id?.email %> " class="card-link">Email me</a>
              </div>
              <div class="card-body mt-1 p-0 job-intro">
                <h5 class="card-title"><%= job?.job_title %></h5>
                <p class="card-text"><%= job?.job_description %></p>
              </div>
              <div class="card row card-project border-0">
                <div id="job-photo" class="carousel slide" data-ride="carousel" data-interval = "1000" data-pause="hover">
                  <ol class="carousel-indicators">
                    <li data-target="#job-photo" data-slide-to="0" class="active"></li>
                    <li data-target="#job-photo" data-slide-to="1"></li>
                    <li data-target="#job-photo" data-slide-to="2"></li>
                  </ol>
                  <div class="carousel-inner">
                    <div class="carousel-item active">
                      <img class="d-block h-100 mx-auto" src="<%= job?.photos[0] %> " alt="Job photo 1">
                    </div>
                    <% for(let i=1, l = job?.photos?.length; i<l; i++) {%>
                      <div class="carousel-item">
                        <img class="d-block h-100 mx-auto" src="<%= job?.photos[i] %>" alt="Second slide">
                      </div>
                    <% } %>
                    <a class="carousel-control-prev" href="#job-photo" role="button" data-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#job-photo" role="button" data-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="sr-only">Next</span>
                    </a>
                  </div>
                </div>
              </div>
              <ul class=" container list-inline px-0 mb-0">
                <% job?.skills.forEach((skill) => { %>
                  <li class="list-inline-item mx-0 rounded"><%= skill%></li>
                <% }) %>
              </ul>
              <div class="card-footer">
                <a href="/jobs/<%= job._id %> " class="card-link">Read more</a>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    </div>
    <%- include('../partials/footer.ejs') %>
  </body>
</html>